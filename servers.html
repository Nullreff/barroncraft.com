---
layout: default
title: Servers
description: Servers hosted by Barron Minecraft
permalink: /servers/
servers:
    - name: dota 
      game: dota
      game_link: http://wiki.barroncraft.com/wiki/Minecraft_Dota
      address: 173.255.220.30
      url: dota.barroncraft.com
      location: Fremont, California
---

<div class="row-fluid">
    <div id="servers"></div>
</div>

{% raw %}
<script id="server-template" type="text/x-handlebars-template">
<div id="{{name}}" class="row-fluid">
   <div class="server span6">
        <h2>{{url}}</h2>
        <a href="{{game_link}}">
            <img src="/images/{{game}}Banner.png" alt="{{game}}"/>
        </a>
        <dl class="dl-horizontal">
            <dt>Location</dt>
            <dd><a href="https://maps.google.com/?q={{location}}">{{location}}</a></dd>
            {{#unless message}}
            <dt>Players</dt>
            <dd>{{playerCount}} / {{maxPlayers}}</dd>
            <dt>Ping</dt>
            <dd>{{ping}}</dd>
            {{/unless}}
        </dl>
    </div>
    <div class="span6">
        {{#if message}}
        <div>
            <div class="alert server-message" >
                {{message}}
            </div>
        </div>
        {{else}}
            {{#each teams}}
            <div class="pull-left team">
                <h3 style="color: {{name}}">{{#capitalize}}{{name}}{{/capitalize}}</h4>
                <ul class="unstyled players">
                    {{#each players}}
                    <li>{{this}}</li>
                    {{/each}}
                </ul>
            </div>
            {{else}}
            <div>
                <div class="alert alert-info player-wait">
                    Waiting for players
                </div>
            </div>
            {{/each}}
        {{/if}}
        <br class="clear"/>
    </div>
</div>
<hr/>
</script>
{% endraw %}

<script type="text/javascript">
    Handlebars.registerHelper('capitalize', function(options) {
        var text = options.fn(this);
        return text.charAt(0).toUpperCase() + text.slice(1);
    });

    var source   = $("#server-template").html();
    var template = Handlebars.compile(source);
    var servers = [
    {% for server in page.servers %}
        {
            name: "{{server.name}}",
            game: "{{server.game}}",
            game_link: "{{server.game_link}}",
            {% if server.message %}message: "{{ server.message }}",{% endif %}
            address: "{{server.address}}",
            url: "{{server.url}}",
            location: "{{server.location}}"
        },
    {% endfor %}
    ];

    $.each(servers, function(i, server) {
        var startTime = new Date().getTime();
        $.getJSON("http://" + server.address + ":25566/", function(data) {
            data.ping = new Date().getTime() - startTime;
            $.extend(data, server); // Combine properties
            var content = template(data);
            $("#servers").append(content);
        }).fail(function() {
            var content = template(server);
            $("#servers").append(content);
        });
    });
</script>
